import{g as z,q as L,w as E,o as R,c as $,b as H,e as M,d as G}from"./index.esm2017-9AJcat3r.js";import{d as J,u as K,z as Q,r as k,m as X,a as n,b as t,n as f,w as o,i as s,F as A,f as r,A as Y,o as a,g as w,p as I,v as Z,B as P,t as B,x as ee,y as te,_ as ae}from"./index-Bg7pnMgA.js";const p=v=>(ee("data-v-30b40dec"),v=v(),te(),v),se={key:2},ne=p(()=>s("h1",null,"Список собеседований",-1)),oe={class:"flex align-items-center mb-5"},ce={class:"flex align-items-center mr-2"},le=p(()=>s("label",{for:"interviewResult1",class:"ml-2"},"Отказ",-1)),ie={class:"flex align-items-center mr-2"},re=p(()=>s("label",{for:"interviewResult2",class:"ml-2"},"Оффер",-1)),de=["href"],_e={class:"contacts"},ue=["href"],pe=p(()=>s("span",{class:"contacts__icon pi pi-telegram"},null,-1)),ve=[pe],me=["href"],he=p(()=>s("span",{class:"contacts__icon pi pi-whatsapp"},null,-1)),fe=[he],ye=["href"],ge=p(()=>s("span",{class:"contacts__icon pi pi-phone"},null,-1)),be=[ge],ke={key:0},we={key:1,class:"interview-stages"},Ie={key:0},Ce={key:1},xe={key:0},Ve={class:"flex gap-2"},De=J({__name:"PageList",setup(v){const y=K(),g=z(),S=Q(),u=k([]),i=k(!0),_=k(""),N=async()=>{i.value=!0;const c=await m(!0);u.value=c,i.value=!1},T=async()=>{i.value=!0;const c=await m();u.value=c,i.value=!1},m=async c=>{let l;return c?l=L($(g,`users/${y.userId}/interviews`),R("createdAt","desc"),E("result","==",_.value)):l=L($(g,`users/${y.userId}/interviews`),R("createdAt","desc")),(await H(l)).docs.map(b=>b.data())},q=async c=>{S.require({message:"Вы хотите удалить собеседование?",header:"Удаление собеседований",icon:"pi pi-info-circle",rejectLabel:"Отмена",acceptLabel:"Удалить",rejectClass:"p-button-secondary p-button-outlined",acceptClass:"p-button-danger",accept:async()=>{i.value=!0,await M(G(g,`users/${y.userId}/interviews`,c));const l=await m();u.value=[...l],i.value=!1}})};return X(async()=>{const c=await m();u.value=c,i.value=!1}),(c,l)=>{const C=r("app-dialog"),b=r("app-progress"),O=r("app-message"),x=r("app-radio"),h=r("app-button"),d=r("app-column"),V=r("app-badge"),U=r("router-link"),j=r("app-datatable"),W=Y("tooltip");return a(),n(A,null,[t(C),i.value?(a(),f(b,{key:0})):!i.value&&!u.value.length?(a(),f(O,{key:1,severity:"info"},{default:o(()=>[w("Нет добавленных собеседований")]),_:1})):(a(),n("div",se,[ne,s("div",oe,[s("div",ce,[t(x,{inputId:"interviewResult1",name:"result",value:"Refusal",modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e)},null,8,["modelValue"]),le]),s("div",ie,[t(x,{inputId:"interviewResult2",name:"result",value:"Offer",modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=e=>_.value=e)},null,8,["modelValue"]),re]),t(h,{class:"mr-2",onClick:N,disabled:!_.value},{default:o(()=>[w("Применить")]),_:1},8,["disabled"]),t(h,{severity:"danger",disabled:!_.value,onClick:T},{default:o(()=>[w("Сбросить")]),_:1},8,["disabled"])]),t(j,{value:u.value},{default:o(()=>[t(d,{field:"company",header:"Компания"}),t(d,{field:"hrName",header:"Имя HR"}),t(d,{field:"vacancyLink",header:"Вакансия"},{body:o(e=>[s("a",{href:e.data.vacancyLink,target:"_blank"},"Ссылка на вакансию",8,de)]),_:1}),t(d,{header:"Контакты"},{body:o(e=>[s("div",_e,[e.data.contactTelegram?(a(),n("a",{key:0,href:`https://t.me/${e.data.contactTelegram}`,target:"_blank",class:"contacts__telegram"},ve,8,ue)):I("",!0),e.data.contactWhatsApp?(a(),n("a",{key:1,href:`https://wa.me/${e.data.contactWhatsApp}`,target:"_blank",class:"contacts__whatsapp"},fe,8,me)):I("",!0),e.data.contactPhone?(a(),n("a",{key:2,href:`https://tel:${e.data.contactPhone}`,target:"_blank",class:"contacts__phone"},be,8,ye)):I("",!0)])]),_:1}),t(d,{header:"Пройденные этапы"},{body:o(e=>[e.data.stages?(a(),n("div",we,[(a(!0),n(A,null,Z(e.data.stages,(D,F)=>P((a(),f(V,{key:F,value:F+1,rounded:""},null,8,["value"])),[[W,D.name,void 0,{top:!0}]])),128))])):(a(),n("span",ke,"Не заполнено"))]),_:1}),t(d,{header:"Зарплатная вилка"},{body:o(e=>[e.data.salaryFrom?(a(),n("span",Ce,B(e.data.salaryFrom)+" - "+B(e.data.salaryTo),1)):(a(),n("span",Ie,"Не заполнено"))]),_:1}),t(d,{header:"Результат"},{body:o(e=>[e.data.result?(a(),f(V,{key:1,severity:e.data.result==="Offer"?"success":"danger",value:e.data.result==="Offer"?"Оффер":"Отказ"},null,8,["severity","value"])):(a(),n("span",xe,"Не заполнено"))]),_:1}),t(d,null,{body:o(e=>[s("div",Ve,[t(U,{to:`/interview/${e.data.id}`},{default:o(()=>[t(h,{icon:"pi pi-pencil",severity:"info"})]),_:2},1032,["to"]),t(h,{icon:"pi pi-trash",severity:"danger",onClick:D=>q(e.data.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["value"])]))],64)}}}),Re=ae(De,[["__scopeId","data-v-30b40dec"]]);export{Re as default};
