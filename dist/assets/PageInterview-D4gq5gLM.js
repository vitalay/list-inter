import{d as L,u as P,r as y,m as A,n as D,a as f,b as o,w,p as U,q as W,f as s,o as v,g as B,t as H,i as t,F as q,v as E,x as M,y as O,_ as j}from"./index-Bg7pnMgA.js";import{g as z,d as G,a as J,T as K,u as Q}from"./index.esm2017-9AJcat3r.js";const n=m=>(M("data-v-bce650c5"),m=m(),O(),m),X={key:1,class:"content-interview"},Y={class:"flex flex-column gap-2"},Z=n(()=>t("label",{for:"company"},"Компания",-1)),ee={class:"flex flex-column gap-2"},ae=n(()=>t("label",{for:"vacancyLink"},"Описание вакансии (ссылка)",-1)),le={class:"flex flex-column gap-2"},te=n(()=>t("label",{for:"hrName"},"Контакт (имя)",-1)),oe={class:"flex flex-column gap-2"},se=n(()=>t("label",{for:"contactTelegram"},"Telegram username HR",-1)),ne={class:"flex flex-column gap-2"},ue=n(()=>t("label",{for:"contactWhatsApp"},"WhatsApp HR",-1)),de={class:"flex flex-column gap-2"},ie=n(()=>t("label",{for:"contactPhone"},"Телефон HR",-1)),ce={class:"flex flex-wrap gap-3 p-fluid mb-3"},pe={class:"flex-auto"},re={class:"flex-auto"},me={class:"flex flex-column gap-2"},ve=["for"],_e={class:"flex flex-column gap-2"},fe=["for"],Ve={class:"flex flex-column gap-2"},ge=["for"],be={class:"flex flex-wrap gap-3 mb-3"},xe={class:"flex align-items-center"},he=n(()=>t("label",{for:"interviewResult1",class:"ml-2"},"Отказ",-1)),ye={class:"flex align-items-center"},we=n(()=>t("label",{for:"interviewResult2",class:"ml-2"},"Оффер",-1)),Ue=L({__name:"PageInterview",setup(m){const k=z(),I=P(),T=W(),c=y(!0),e=y(),V=G(k,`users/${I.userId}/interviews`,T.params.id),g=async()=>{c.value=!0;const p=await J(V);if(p.exists()){const a=p.data();a.stages&&a.stages.length&&(a.stages=a.stages.map(u=>u.date&&u.date instanceof K?{...u,date:u.date.toDate()}:u)),e.value=a}c.value=!1,console.log(e.value)},R=async()=>{c.value=!0,await Q(V,{...e.value}),await g()},S=()=>{e.value&&(e.value.stages||(e.value.stages=[]),e.value.stages.push({name:"",date:null,description:""}))},N=p=>{e.value&&e.value.stages&&e.value.stages.splice(p,1)};return A(async()=>await g()),(p,a)=>{var h;const u=s("app-progress"),d=s("app-input-text"),b=s("app-input-number"),_=s("app-button"),C=s("app-calendar"),F=s("app-textarea"),x=s("app-radio"),$=s("app-card");return c.value?(v(),D(u,{key:0})):(h=e.value)!=null&&h.id&&!c.value?(v(),f("div",X,[o($,null,{title:w(()=>[B("Собеседование в компанию "+H(e.value.company),1)]),content:w(()=>[t("div",Y,[Z,o(d,{class:"input mb-3",id:"company",modelValue:e.value.company,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.company=l)},null,8,["modelValue"])]),t("div",ee,[ae,o(d,{class:"input mb-3",id:"vacancyLink",modelValue:e.value.vacancyLink,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.vacancyLink=l)},null,8,["modelValue"])]),t("div",le,[te,o(d,{class:"input mb-3",id:"hrName",modelValue:e.value.hrName,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.hrName=l)},null,8,["modelValue"])]),t("div",oe,[se,o(d,{class:"input mb-3",id:"contactTelegram",modelValue:e.value.contactTelegram,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.contactTelegram=l)},null,8,["modelValue"])]),t("div",ne,[ue,o(d,{class:"input mb-3",id:"contactWhatsApp",modelValue:e.value.contactWhatsApp,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.contactWhatsApp=l)},null,8,["modelValue"])]),t("div",de,[ie,o(d,{class:"input mb-3",id:"contactPhone",modelValue:e.value.contactPhone,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.contactPhone=l)},null,8,["modelValue"])]),t("div",ce,[t("div",pe,[o(b,{inputId:"salaryFrom",placeholder:"Зарплатная вилка от",modelValue:e.value.salaryFrom,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.salaryFrom=l)},null,8,["modelValue"])]),t("div",re,[o(b,{inputId:"salaryTo",placeholder:"Зарплатная вилка до",modelValue:e.value.salaryTo,"onUpdate:modelValue":a[7]||(a[7]=l=>e.value.salaryTo=l)},null,8,["modelValue"])])]),o(_,{label:"Добавить этап",severity:"info",icon:"pi pi-plus",class:"mb-3",onClick:S}),e.value.stages?(v(!0),f(q,{key:0},E(e.value.stages,(l,i)=>(v(),f("div",{key:i,class:"interview-stage"},[t("div",me,[t("label",{for:`stage-name-${i}`},"Название этапа",8,ve),o(d,{class:"input mb-3",id:`stage-name-${i}`,modelValue:l.name,"onUpdate:modelValue":r=>l.name=r},null,8,["id","modelValue","onUpdate:modelValue"])]),t("div",_e,[t("label",{for:`stage-date-${i}`},"Дата прохождения этапа",8,fe),o(C,{class:"input mb-3",id:`stage-date-${i}`,dateFormat:"dd.mm.yy",modelValue:l.date,"onUpdate:modelValue":r=>l.date=r},null,8,["id","modelValue","onUpdate:modelValue"])]),t("div",Ve,[t("label",{for:`stage-description-${i}`},"Комментарий",8,ge),o(F,{id:`stage-description-${i}`,class:"input mb-3",rows:"5",modelValue:l.description,"onUpdate:modelValue":r=>l.description=r},null,8,["id","modelValue","onUpdate:modelValue"])]),o(_,{severity:"danger",label:"Удалить этап",onClick:N})]))),128)):U("",!0),t("div",be,[t("div",xe,[o(x,{inputId:"interviewResult1",name:"result",value:"Refusal",modelValue:e.value.result,"onUpdate:modelValue":a[8]||(a[8]=l=>e.value.result=l)},null,8,["modelValue"]),he]),t("div",ye,[o(x,{inputId:"interviewResult2",name:"result",value:"Offer",modelValue:e.value.result,"onUpdate:modelValue":a[9]||(a[9]=l=>e.value.result=l)},null,8,["modelValue"]),we])]),o(_,{label:"Сохранить",icon:"pi pi-save",onClick:R})]),_:1})])):U("",!0)}}}),Te=j(Ue,[["__scopeId","data-v-bce650c5"]]);export{Te as default};
